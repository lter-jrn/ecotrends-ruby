<div id="metadata-container">
  <script type="text/JavaScript" language="JavaScript">
    <
    !--insertTemplateOpening('http://ecotrends.nmsu.edu:/exploratory');//--></script>
  <table cellpadding="0" cellspacing="0" class="mainContainerTableStyle" width="100%">
    <tbody>
    <tr>
      <td>
        <table cellpadding="0" cellspacing="0" width="100%" class="tabledefault">
          <tbody>
          <tr>
            <td class="tablehead-metadata" colspan="2">Dataset Title</td>
          </tr>
          <tr>
            <td class="citation" colspan="2">
              <%= @xml_hash["root"]["eml"]["dataset"]["title"] %>
            </td>
          </tr>
          <tr>
            <td class="tablehead-metadata" colspan="2">Dataset description:</td>
          </tr>
          <tr>
            <td class="citation" colspan="2">
              <%= @xml_hash["root"]["eml"]["dataset"]["dataTable"]["entityDescription"] %>
            </td>
          </tr>
          <tr>
            <td class="tablehead-metadata" colspan="2">Short name:</td>
          </tr>
          <tr>
            <td class="citation" colspan="2">
              <%= @xml_hash["root"]["eml"]["dataset"]["shortName"] %>
            </td>
          </tr>
          <tr>
            <td class="tablehead-metadata" colspan="2">Download File:</td>
          </tr>
          <tr>
            <td class="citation" colspan="2">
              <%= link_to @xml_hash["root"]["eml"]["dataset"]["dataTable"]["physical"]["distribution"]["online"]["url"], @xml_hash["root"]["eml"]["dataset"]["dataTable"]["physical"]["distribution"]["online"]["url"] %>
            </td>
          </tr>

          <!-- data set owners -->
          <tr>
            <td colspan="2">
              <table cellpadding="0" cellspacing="0" width="100%" class="tabledefault">
                <tbody>
                <tr>
                  <td colspan="2" class="tablehead-metadata">Dataset owners:</td>
                </tr>
                </tbody>
              </table>
              <table width="100%">
                <tbody>
                <% @xml_hash["root"]["eml"]["dataset"]["creator"].each do |creator| %>

                    <tr>
                      <td class="highlight-metadata" width="15%"><%= creator["organizationName"] %></td>
                      <td class="secondCol-metadata" width="85%">
                        <% creator["address"].each do |key, address| %>
                          <% if key == "deliveryPoint" %>
                                <% if address.kind_of?(Array) %>
                                  <%= "#{key.underscore.humanize}: #{address.join(', ')}" %>
                                <% else %>
                                    <%= "#{key.underscore.humanize}: #{address}" %>
                                <% end %>
                          <% else %>
                                <%= "#{key.underscore.humanize}: #{address}" %> </br>
                          <% end %>

                        <% end %>

                        Email: <%= link_to creator["electronicMailAddress"], "mailto:#{creator['electronicMailAddress']}" %></br>
                        Contry: <%= link_to creator["onlineUrl"], creator["onlineUrl"] %></br>
                      </td>
                    </tr>

                <% end %>

                </tbody>
              </table>
            </td>
          </tr>
          <!-- metadata owners -->
          <tr>
            <td colspan="2">
              <table cellpadding="0" cellspacing="0" width="100%" class="tabledefault">
                <tbody>
                <tr>
                  <td colspan="2" class="tablehead-metadata">Metadata owners:</td>
                </tr>
                </tbody>
              </table>
              <table width="100%">
                <tbody>
                <% @xml_hash["root"]["eml"]["dataset"]["metadataProvider"].each do |provider| %>

                    <tr>
                      <td class="highlight-metadata" width="15%"><%= provider["organizationName"] %></td>
                      <td class="secondCol-metadata" width="85%">
                        <% provider["address"].each do |key, address| %>
                            <% if key == "deliveryPoint" %>
                                <% if address.kind_of?(Array) %>
                                    <%= "#{key.underscore.humanize}: #{address.join(', ')}" %>
                                <% else %>
                                    <%= "#{key.underscore.humanize}: #{address}" %>
                                <% end %>
                            <% else %>
                                <%= "#{key.underscore.humanize}: #{address}" %> </br>
                            <% end %>
                        <% end %>

                        Phone: <%= provider["phone"] %></br>
                        Email: <%= link_to provider["electronicMailAddress"], "mailto:#{provider['electronicMailAddress']}" %></br>
                        Contry: <%= link_to provider["onlineUrl"], provider["onlineUrl"] %></br>
                      </td>
                    </tr>

                <% end %>

                </tbody>
              </table>
            </td>
          </tr>

          <!-- Abstract -->
          <tr>
            <td colspan="2">
              <table cellpadding="0" cellspacing="0" width="100%" class="tabledefault">
                <tbody>
                <tr>
                  <td colspan="2" class="tablehead-metadata">Abstract:</td>
                </tr>
                </tbody>
              </table>
              <table width="100%">
                <tbody>
                    <tr>
                      <td class="highlight-metadata" width="15%"></td>
                      <td class="secondCol-metadata" width="85%">
                        <% @xml_hash["root"]["eml"]["dataset"]["abstract"]["para"].each do |para| %>
                          <%= simple_format(para) %>
                        <% end %>
                      </td>
                    </tr>

                </tbody>
              </table>
            </td>
          </tr>

          <!-- Keywords -->
          <tr>
            <td colspan="2">
              <table cellpadding="0" cellspacing="0" width="100%" class="tabledefault">
                <tbody>
                <tr>
                  <td colspan="2" class="tablehead-metadata">Keywords:</td>
                </tr>
                </tbody>
              </table>
              <table width="100%">
                <tbody>
                <tr>
                  <td class="highlight-metadata" width="15%"></td>
                  <td class="secondCol-metadata" width="85%">
                    <% @xml_hash["root"]["eml"]["dataset"]["keywordSet"]["keyword"].each do |keyword| %>
                        <%= keyword %></br>
                    <% end %>
                  </td>
                </tr>

                </tbody>
              </table>
            </td>
          </tr>

          <!-- License and Usage Rights -->
          <tr>
            <td colspan="2">
              <table cellpadding="0" cellspacing="0" width="100%" class="tabledefault">
                <tbody>
                <tr>
                  <td colspan="2" class="tablehead-metadata">License and Usage Rights: <b><%= @xml_hash["root"]["eml"]["dataset"]["intellectualRights"]["section"]["title"] %></b> <%= @xml_hash["root"]["eml"]["dataset"]["intellectualRights"]["section"]["para"]["emphasis"] %>
                  </td>
                </tr>
                </tbody>
              </table>
              <table width="100%">
                <tbody>
                <tr>
                  <td class="highlight-metadata" width="15%"></td>
                  <td class="secondCol-metadata" width="85%">
                    <% @xml_hash["root"]["eml"]["dataset"]["intellectualRights"]["section"]["section"].each do |section| %>

                           <p>
                             <b><%= "#{section['title']}:" %></b></br>
                             <% if section["para"].kind_of?(Array) %>
                                <% section["para"].each do |para| %>
                                  <%= simple_format(para) %>
                                <% end %>
                             <% else %>
                                 <% if section["para"].to_s.include?("orderedlist") %>
                                     <% @meta_hash = {} %>
                                     <% section["para"].each do |pair| %>
                                         <% key,value = pair.split(/:/) %>
                                         <% @meta_hash[key] = value %>
                                     <% end %>
                                     <% @meta_info = @meta_hash.first.first.second["listitem"] %>
                                     <% @meta_info.each do |item| %>
                                         <p><%= p item["para"] %></p>
                                     <% end %>
                                 <% else %>

                                     <%= section["para"] %>
                                 <% end %>

                             <% end %>

                           </p>

                    <% end %>
                  </td>
                </tr>

                </tbody>
              </table>
            </td>
          </tr>

          <!-- Geographic Coverage -->
          <tr>
            <td colspan="2">
              <table cellpadding="0" cellspacing="0" width="100%" class="tabledefault">
                <tbody>
                <tr>

                  <td colspan="2" class="tablehead-metadata">Geographic Coverage: <b><%= @xml_hash["root"]["eml"]["dataset"]["coverage"]["geographicCoverage"]["geographicDescription"] %></b>
                  </td>
                </tr>
                </tbody>
              </table>
              <table width="100%">
                <tbody>
                <tr>
                  <td class="highlight-metadata" width="15%"></td>
                  <td class="secondCol-metadata" width="85%">
                    <p>
                      <b>Bounding Coordinates:</b></br>
                      <% @xml_hash["root"]["eml"]["dataset"]["coverage"]["geographicCoverage"]["boundingCoordinates"].each do |key, coordinate| %>
                        <ul>
                          <li><%= "#{key.underscore.humanize}: #{coordinate}" %></li>
                        </ul>
                      <% end %>
                    </p>
                    <p>
                      <b>Temporal Coverage Coordinates:</b></br>
                      <% @xml_hash["root"]["eml"]["dataset"]["coverage"]["temporalCoverage"]["rangeOfDates"].each do |key, date| %>
                        <ul>
                          <li><%= "#{key.underscore.humanize}: #{date['calendarDate']}" %></li>
                        </ul>
                      <% end %>
                    </p>
                  </td>
                </tr>

                </tbody>
              </table>
            </td>
          </tr>

          <!-- Contacts -->
          <tr>
            <td colspan="2">
              <table cellpadding="0" cellspacing="0" width="100%" class="tabledefault">
                <tbody>
                <tr>

                  <td colspan="2" class="tablehead-metadata">Contact(s):</td>
                </tr>
                </tbody>
              </table>
              <table width="100%">
                <tbody>
                <tr>
                  <td class="highlight-metadata" width="15%"></td>
                  <td class="secondCol-metadata" width="85%">
                      <% @xml_hash["root"]["eml"]["dataset"]["contact"].each do |contact| %>
                        <p>
                          <b>Name:</b> <%= contact['organizationName'] || contact['individualName'] %></br>
                          <b>Position:</b> <%= contact['positionName'] %></br>
                          <b>Address:</b></br>
                          <ul>
                          <% contact["address"].each do |key, a| %>
                            <% if key == "deliveryPoint" %>
                              <% a.each do |dp| %>
                                    <li><b>Delivery Point: </b> <%= "#{dp}" %></li>
                              <% end %>
                            <% else %>
                                  <li><b><%= "#{key.underscore.humanize}: " %></b> <%= "#{a}" %></li>
                            <% end %>
                          <% end %>
                          </ul>
                          <% if contact["phone"].nil? == false %>
                              <% contact["phone"].each do |phone| %>
                                  <b>Phone: </b><%= phone %></br>
                              <% end %>
                          <% end %>

                          <b>Online Url: </b><%= link_to contact["onlineUrl"], contact["onlineUrl"] %>
                        </p>
                    <% end %>

                  </td>
                </tr>

                </tbody>
              </table>
            </td>
          </tr>

          <!-- Method Info: -->
          <tr>
            <td colspan="2">
              <table cellpadding="0" cellspacing="0" width="100%" class="tabledefault">
                <tbody>
                <tr>

                  <td colspan="2" class="tablehead-metadata">Method Info:</td>
                </tr>
                </tbody>
              </table>
              <table width="100%">
                <tbody>
                <tr>
                  <td class="highlight-metadata" width="15%"></td>
                  <td class="secondCol-metadata" width="85%">
                    <% @xml_hash["root"]["eml"]["dataset"]["methods"]["methodStep"].each do |methodStep| %>
                        <p>
                          <b>Description</b></br>
                          <% methodStep["description"].each do |para| %>
                              <% para.each do |pr| %>
                                <% if pr.class == Array %>
                                    <% pr.each do |stuff| %>
                                      <p><%= p stuff %> </p>
                                    <% end %>
                                <% elsif pr != "para" %>
                                   <p><%= p pr %> </p>
                                <% end %>

                              <% end %>

                          <% end %>

                        </p>
                    <% end %>

                  </td>
                </tr>

                </tbody>
              </table>
            </td>
          </tr>

          </tbody>
        </table>
</div>